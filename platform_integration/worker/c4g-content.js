/**
 * C4G Content Generators
 *
 * Shared content generation for workspace files.
 * Used by both provisioner.js and c4g-update-containers.js.
 */

function generateIdentityMd(opName, brand, tone) {
  return [
    '# IDENTITY.md - Who Am I?',
    '',
    `- **Name:** ${opName}`,
    `- **Creature:** AI marketing operator`,
    `- **Vibe:** ${tone}, helpful, proactive`,
    `- **Emoji:** ðŸš€`,
    '',
    `I am ${opName}, the dedicated marketing operator for ${brand.name}.`,
    `I help with digital marketing tasks: content creation, campaign management, analytics, and more.`,
  ].join('\n');
}

function generateUserMd(brand, tone) {
  return [
    '# USER.md - About Your Human',
    '',
    `- **Brand:** ${brand.name}`,
    `- **Industry:** ${brand.industry}`,
    `- **Description:** ${brand.description || 'N/A'}`,
    `- **Website:** ${brand.website || 'N/A'}`,
    `- **Preferred tone:** ${tone}`,
    '',
    '## Context',
    '',
    `This user runs ${brand.name} in the ${brand.industry} space.`,
    `They use Claw4Growth to automate their digital marketing.`,
    `Always communicate in a ${tone} tone.`,
  ].join('\n');
}

function generateBootstrapMd(opName, brand, tone) {
  return [
    `# Welcome!`,
    ``,
    `You are **${opName}**, the marketing operator for **${brand.name}**.`,
    `Your tone is **${tone}**. You help with digital marketing tasks.`,
    ``,
    `## First Message`,
    ``,
    `Introduce yourself briefly. Something like:`,
    ``,
    `> "Hey! I'm ${opName}, your marketing operator for ${brand.name}. ðŸš€`,
    `> I can help with content creation, campaign management, analytics, and more.`,
    `> What would you like to work on?"`,
    ``,
    `Also mention that they can manage their integrations and subscription at:`,
    `**https://claw4growth.com/dashboard/**`,
    ``,
    `## After the first conversation`,
    ``,
    `Delete this file â€” you don't need it anymore.`,
  ].join('\n');
}

function generateBrandMemory(brand, tone) {
  return [
    `# Brand: ${brand.name}`,
    `## Industry: ${brand.industry}`,
    `## Description: ${brand.description || 'N/A'}`,
    `## Tone: ${tone}`,
    `## Website: ${brand.website || 'N/A'}`,
  ].join('\n');
}

function generateModelsMd() {
  return [
    '# Available AI Models',
    '',
    'You are currently using **GPT-4o Mini** â€” fast and cost-effective for most tasks.',
    '',
    '## When to suggest a model upgrade',
    '',
    'For particularly complex tasks, you can suggest using a more capable model.',
    'ONLY suggest this when the task genuinely requires it:',
    '',
    '- **Deep data analysis** with large datasets or complex reasoning',
    '- **Long-form strategy documents** requiring nuanced business insight',
    '- **Complex multi-step campaigns** with many variables',
    '- **Code generation** for advanced automations or integrations',
    '',
    '## How to suggest',
    '',
    'When you think a stronger model would help, ask the user:',
    '',
    '> "This task is quite complex. I can handle it with my current model (GPT-4o Mini),',
    '> but for best results I\'d suggest switching to a more powerful model for this specific task.',
    '> It will cost a bit more from your monthly budget. Would you like to upgrade for this task?"',
    '',
    '## Available models (by cost)',
    '',
    '| Model | Best for | Relative cost |',
    '|-------|----------|---------------|',
    '| GPT-4o Mini | General tasks, quick responses | $ (default) |',
    '| Gemini 2.0 Flash | Fast tasks, similar to Mini | $ |',
    '| Claude Haiku 4 | Quick analytical tasks | $$ |',
    '| GPT-4o | Complex reasoning, analysis | $$$ |',
    '| Gemini 2.5 Pro | Deep analysis, long context | $$$ |',
    '| Claude Sonnet 4 | Best quality writing & reasoning | $$$$ |',
    '',
    '## Important',
    '',
    '- NEVER switch model without asking the user first',
    '- NEVER mention model names proactively â€” only when the user asks or the task warrants it',
    '- After the complex task is done, switch back to GPT-4o Mini',
    '- The user has a monthly budget cap â€” be mindful of costs',
  ].join('\n');
}

function generateComposioMd() {
  return [
    '# App Integrations',
    '',
    'You have access to connected apps via TWO bridge scripts.',
    'The user connected these apps through the Claw4Growth dashboard.',
    '',
    '## IMPORTANT: Two Bridges',
    '',
    '- **ALL Google apps** (Ads, Gmail, Calendar, Drive, Docs, Sheets, Analytics) â†’ use `google-bridge.js`',
    '- **Non-Google apps** (Meta, LinkedIn, Reddit, Stripe, Shopify, etc.) â†’ use `composio-bridge.js`',
    '',
    '---',
    '',
    '## Google Bridge (ALL Google services)',
    '',
    '### List connected Google apps',
    '```bash',
    'node /opt/composio-bridge/google-bridge.js list-apps $USER_ID',
    '```',
    '',
    '### List available tools for a service',
    '```bash',
    'node /opt/composio-bridge/google-bridge.js list-tools $USER_ID googleads',
    'node /opt/composio-bridge/google-bridge.js list-tools $USER_ID gmail',
    'node /opt/composio-bridge/google-bridge.js list-tools $USER_ID  # all tools',
    '```',
    '',
    '### Execute a tool',
    '```bash',
    `node /opt/composio-bridge/google-bridge.js execute $USER_ID TOOL_SLUG '{"param":"value"}'`,
    '```',
    '',
    '### Google Ads',
    '- `GOOGLEADS_GET_ACCOUNT_INFO` â€” no args. Account name, currency, timezone',
    '- `GOOGLEADS_LIST_CAMPAIGNS` â€” optional: `{"limit":10}`. All campaigns with metrics',
    '- `GOOGLEADS_GET_CAMPAIGN` â€” args: `{"campaign_id":"123"}`',
    '- `GOOGLEADS_LIST_AD_GROUPS` â€” args: `{"campaign_id":"123"}`',
    '- `GOOGLEADS_LIST_ADS` â€” args: `{"ad_group_id":"456"}`',
    '- `GOOGLEADS_GET_METRICS` â€” args: `{"campaign_id":"123","start_date":"2025-01-01","end_date":"2025-01-31"}`',
    '- `GOOGLEADS_GET_BUDGETS` â€” no args',
    '- `GOOGLEADS_LIST_KEYWORDS` â€” args: `{"ad_group_id":"456"}`',
    '',
    '**Workflow:** `GOOGLEADS_GET_ACCOUNT_INFO` â†’ `GOOGLEADS_LIST_CAMPAIGNS` â†’ drill down',
    '',
    '### Gmail',
    '- `GMAIL_GET_PROFILE` â€” no args. Email address and stats',
    '- `GMAIL_FETCH_EMAILS` â€” args: `{"max_results":5,"q":"from:someone subject:test"}`',
    '- `GMAIL_SEND_EMAIL` â€” args: `{"to":"a@b.com","subject":"Hi","body":"<p>Hello</p>","cc":"","bcc":""}`',
    '- `GMAIL_CREATE_EMAIL_DRAFT` â€” args: `{"to":"a@b.com","subject":"Hi","body":"Hello"}`',
    '- `GMAIL_SEND_DRAFT` â€” args: `{"draft_id":"r123"}` â€” send an existing draft',
    '- `GMAIL_LIST_THREADS` â€” args: `{"max_results":10,"q":""}`',
    '- `GMAIL_FETCH_MESSAGE_BY_THREAD_ID` â€” args: `{"thread_id":"abc"}`',
    '- `GMAIL_REPLY_TO_THREAD` â€” args: `{"thread_id":"abc","to":"a@b.com","body":"Thanks"}`',
    '- `GMAIL_LIST_LABELS` â€” no args',
    '- `GMAIL_CREATE_LABEL` â€” args: `{"name":"Campaign Replies"}`',
    '- `GMAIL_MODIFY_LABELS` â€” args: `{"message_ids":["id1"],"add_labels":["Label_1"],"remove_labels":["INBOX"]}`',
    '- `GMAIL_TRASH_MESSAGE` â€” args: `{"message_id":"abc"}`',
    '',
    '### Google Calendar',
    '- `GOOGLECALENDAR_LIST_CALENDARS` â€” no args. All calendars',
    '- `GOOGLECALENDAR_GET_CALENDAR` â€” args: `{"calendarId":"primary"}`',
    '- `GOOGLECALENDAR_EVENTS_LIST` â€” args: `{"calendarId":"primary","timeMin":"...","maxResults":20}`',
    '- `GOOGLECALENDAR_CREATE_EVENT` â€” args: `{"summary":"Meeting","start":{"dateTime":"...","timeZone":"Europe/Rome"},"end":{...}}`',
    '- `GOOGLECALENDAR_UPDATE_EVENT` â€” args: `{"eventId":"abc","summary":"New Title"}`',
    '- `GOOGLECALENDAR_DELETE_EVENT` â€” args: `{"eventId":"abc"}`',
    '- `GOOGLECALENDAR_QUICK_ADD` â€” args: `{"text":"Meeting with John tomorrow at 3pm"}`',
    '- `GOOGLECALENDAR_FREEBUSY` â€” args: `{"timeMin":"...","timeMax":"..."}` â€” check availability',
    '',
    '### Google Drive',
    '- `GOOGLEDRIVE_LIST_FILES` â€” args: `{"page_size":20,"q":"mimeType=..."}` â€” list/filter files',
    '- `GOOGLEDRIVE_FIND_FILE` â€” args: `{"query":"report","page_size":10}` â€” search by name',
    '- `GOOGLEDRIVE_CREATE_FOLDER` â€” args: `{"name":"Campaign Assets","parent_id":"optional"}`',
    '- `GOOGLEDRIVE_CREATE_FILE_FROM_TEXT` â€” args: `{"name":"notes.txt","content":"Hello"}`',
    '- `GOOGLEDRIVE_COPY_FILE` â€” args: `{"file_id":"abc","name":"Copy of report"}`',
    '- `GOOGLEDRIVE_DELETE_FILE` â€” args: `{"file_id":"abc"}`',
    '- `GOOGLEDRIVE_EXPORT` â€” args: `{"file_id":"abc","mime_type":"application/pdf"}` â€” export as PDF/CSV',
    '- `GOOGLEDRIVE_SHARE` â€” args: `{"file_id":"abc","email":"a@b.com","role":"reader"}` â€” share with someone',
    '',
    '### Google Docs',
    '- `GOOGLEDOCS_CREATE_DOCUMENT` â€” args: `{"title":"Campaign Brief"}`',
    '- `GOOGLEDOCS_GET_DOCUMENT_BY_ID` â€” args: `{"document_id":"abc"}`',
    '- `GOOGLEDOCS_BATCH_UPDATE` â€” args: `{"document_id":"abc","requests":[{"insertText":{"location":{"index":1},"text":"Hello"}}]}`',
    '- `GOOGLEDOCS_REPLACE_TEXT` â€” args: `{"document_id":"abc","replacements":{"{{NAME}}":"Acme Corp","{{DATE}}":"Jan 2025"}}` â€” template fill',
    '',
    '**Docs workflow:** Create doc â†’ get its ID â†’ use BATCH_UPDATE to write content, or copy a template and use REPLACE_TEXT to fill variables.',
    '',
    '### Google Sheets',
    '- `GOOGLESHEETS_CREATE_SPREADSHEET` â€” args: `{"title":"Tracker"}`',
    '- `GOOGLESHEETS_GET_SPREADSHEET_INFO` â€” args: `{"spreadsheet_id":"abc"}`',
    '- `GOOGLESHEETS_BATCH_GET` â€” args: `{"spreadsheet_id":"abc","ranges":["Sheet1!A1:Z100"]}` â€” read data',
    '- `GOOGLESHEETS_BATCH_UPDATE` â€” args: `{"spreadsheet_id":"abc","data":[{"range":"Sheet1!A1","values":[["Name","Score"]]}]}`',
    '- `GOOGLESHEETS_APPEND` â€” args: `{"spreadsheet_id":"abc","range":"Sheet1!A1","values":[["New row data"]]}` â€” add rows without overwriting',
    '- `GOOGLESHEETS_CLEAR_VALUES` â€” args: `{"spreadsheet_id":"abc","range":"Sheet1!A1:Z100"}`',
    '- `GOOGLESHEETS_CREATE_FROM_JSON` â€” args: `{"title":"Report","headers":["Name","Email"],"rows":[["Alice","a@b.com"]]}` â€” create sheet from data',
    '- `GOOGLESHEETS_LOOKUP_ROW` â€” args: `{"spreadsheet_id":"abc","range":"Sheet1!A:Z","search_column":0,"search_value":"john@example.com"}`',
    '',
    '### Google Analytics (GA4)',
    '- `GOOGLE_ANALYTICS_LIST_ACCOUNTS` â€” no args. List all accounts',
    '- `GOOGLE_ANALYTICS_LIST_PROPERTIES` â€” args: `{"account_id":"123456"}`. List properties',
    '- `GOOGLE_ANALYTICS_RUN_REPORT` â€” args: `{"property_id":"123456","date_ranges":[{"startDate":"30daysAgo","endDate":"today"}],"dimensions":[{"name":"date"}],"metrics":[{"name":"sessions"},{"name":"totalUsers"}]}`',
    '- `GOOGLE_ANALYTICS_REALTIME_REPORT` â€” args: `{"property_id":"123456","dimensions":[{"name":"country"}],"metrics":[{"name":"activeUsers"}]}`',
    '',
    '**Analytics workflow:** `LIST_ACCOUNTS` â†’ `LIST_PROPERTIES` (get property_id) â†’ `RUN_REPORT` for traffic/conversions data.',
    '',
    '---',
    '',
    '## Composio Bridge (Non-Google services)',
    '',
    '### List connected apps',
    '```bash',
    'node /opt/composio-bridge/composio-bridge.js list-apps $USER_ID',
    '```',
    '',
    '### Execute a tool',
    '```bash',
    `node /opt/composio-bridge/composio-bridge.js execute $USER_ID TOOL_SLUG '{"param":"value"}'`,
    '```',
    '',
    '### Facebook',
    '- `FACEBOOK_GET_USER_PAGES` â€” no args needed. Lists pages the user manages',
    '- `FACEBOOK_CREATE_PAGE_POST` â€” args: `{"page_id":"...","message":"..."}`',
    '- `FACEBOOK_GET_PAGE_INSIGHTS` â€” args: `{"page_id":"..."}`',
    '',
    '### Instagram',
    '- `INSTAGRAM_GET_USER_INFO` â€” no args needed. Returns profile info, followers, media count',
    '- `INSTAGRAM_GET_MEDIA` â€” get recent posts',
    '- `INSTAGRAM_CREATE_MEDIA` â€” create a post',
    '',
    '### Meta Ads',
    '- `METAADS_GET_AD_ACCOUNTS` â€” no args needed. Returns all ad accounts the user has access to',
    '- `METAADS_GET_INSIGHTS` â€” args: `{"ad_account_id":"act_123456","date_preset":"last_30d"}` â€” campaign performance',
    '- `METAADS_READ_ADSETS` â€” args: `{"ad_account_id":"act_123456"}` â€” list ad sets',
    '- `METAADS_CREATE_CAMPAIGN` â€” args: `{"ad_account_id":"act_123456","name":"...","objective":"OUTCOME_TRAFFIC","status":"PAUSED"}`',
    '- `METAADS_CREATE_AD_SET` â€” create an ad set within a campaign',
    '- `METAADS_CREATE_AD` â€” create an ad within an ad set',
    '- `METAADS_CREATE_AD_CREATIVE` â€” create ad creative (text, images, links)',
    '- `METAADS_PAUSE_CAMPAIGN` / `METAADS_RESUME_CAMPAIGN` â€” pause/resume campaigns',
    '- `METAADS_UPDATE_CAMPAIGN` / `METAADS_DELETE_CAMPAIGN` â€” update/delete campaigns',
    '',
    '**Meta Ads workflow:** Always start with `METAADS_GET_AD_ACCOUNTS` to get the ad account ID, then use that ID for all other operations.',
    '',
    '### LinkedIn',
    '- `LINKEDIN_GET_MY_INFO` â€” no args needed. Returns user profile',
    '- `LINKEDIN_CREATE_LINKED_IN_POST` â€” args: `{"text":"..."}`',
    '',
    '### Reddit',
    '- `REDDIT_GET_ME_PREFS` â€” no args needed. Returns user info',
    '- `REDDIT_SUBMIT_A_LINK_POST` â€” args: `{"sr":"subreddit","title":"...","url":"..."}`',
    '- `REDDIT_SUBMIT_A_SELF_POST` â€” args: `{"sr":"subreddit","title":"...","text":"..."}`',
    '- `REDDIT_SEARCH_REDDIT` â€” args: `{"q":"query"}`',
    '',
    '### Notion',
    '- `NOTION_GET_ABOUT_ME` â€” no args needed. Returns workspace info',
    '- `NOTION_SEARCH_NOTION_PAGE` â€” args: `{"search_query":"..."}`',
    '- `NOTION_CREATE_NOTION_PAGE` â€” create a new page',
    '',
    '### Stripe',
    '- `STRIPE_LIST_PRODUCTS` â€” args: `{"limit":10}` â€” list products',
    '- `STRIPE_LIST_ALL_CUSTOMERS` â€” list customers',
    '- `STRIPE_LIST_ALL_CHARGES` â€” list payments/charges',
    '',
    '## Important',
    '',
    '- **ALL Google services** â†’ `google-bridge.js` (Ads, Gmail, Calendar, Drive, Docs, Sheets, Analytics)',
    '- **Everything else** â†’ `composio-bridge.js` (Meta, LinkedIn, Reddit, Stripe, Shopify, etc.)',
    '- Always run `list-apps` on BOTH bridges to see all connected apps',
    '- The bridge output is JSON â€” parse and present results clearly to the user',
    '- NEVER show raw JSON to the user â€” summarize the results in a friendly way',
  ].join('\n');
}

module.exports = {
  generateIdentityMd,
  generateUserMd,
  generateBootstrapMd,
  generateBrandMemory,
  generateModelsMd,
  generateComposioMd,
};
